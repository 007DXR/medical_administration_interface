<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>PI端-深静脉置管相关血栓风险智能预测系统</title>
    <script>if (
            function () {
                try {
                    eval([
                        'for (const a of []) {}',
                        'let b = { fetch, Proxy }'
                    ].join(';'))
                } catch (e) { console.log('!!', e); return true }
            }()
        ) location.href = "/browser-update"</script>

    <script defer="defer" src="js/modao_script.js"></script>
    <script defer="defer" src="js/listener_script.js"></script>
    <script defer="defer" src="js/echarts.min.js"></script>
    <link href="modao_style.css" rel="stylesheet">
    <style data-styled="active" data-styled-version="5.3.11"></style>
</head>

<body>
    <div class="screen-content">
        <div class="widgets" style=" left: 0px; top: 0px;">
            <div class="scontainer" style=" margin-top: 0px;"><img
                    class="SketchArtboardImage__StyledImage-sc-1b0ohq7-0 eGDJKE artboard-image" src="">
                <div data-cid="slup0zf46xrkfcs" data-link_cid="" class="tree-node"
                    style=" overflow: scroll;; position: absolute; top: 0px; width: 100%; min-width: 960px; height:100%;left: 0px; opacity: 1; transform-origin: 720px 512px;">

                    <div data-cid="ik4s6szig1alup0zf47538ekn" data-link_cid="" class="tree-node"
                        style="position: absolute; top: 0px; width: 100%; z-index: 139; opacity: 1; transform-origin: 592px 32.5px;">

                        <div class="widget rounded_rect undefined hcenter vmiddle"
                            style="position: absolute; left: 0px; top: 0px; width: 100%; height: 65px; border-color: rgb(187, 187, 187); border-width: 0px; border-style: solid; box-shadow: rgba(0, 21, 41, 0.12) 0px 1px 4px 0px; font-size: 14px; padding: 0px; text-align: center; line-height: 20px; font-weight: normal; font-style: normal; background: rgb(255, 255, 255);">
                            <div data-cid="ik4s6szigz9lup0zf471d9i12" data-link_cid="" class="tree-node"
                                style="position: absolute; top: 18px; right:110px;width: 28px; height: 28px; z-index: 140; opacity: 1; transform-origin: 14px 14px;">

                                <div class="widget image_view undefined"
                                    style="width: 28px; height: 28px; border-color: unset; border-width: 0px; border-style: none; clip-path: circle(45% at 50% 50%); font-weight: normal; font-style: normal;">

                                    <div class="wrapper"
                                        style="top: 0px; left: 0px; width: 28px; height: 28px; transform: rotate(0deg);">
                                        <img class="img" src="img/login_logo.png" draggable="false"
                                            style="display: block; width: 28px; height: 28px;">
                                    </div>

                                </div>

                            </div>
                            <div data-cid="ik4s6szigg5lup0zf475pijes" data-link_cid="" class="tree-node"
                                style="position: absolute; top: 31px; right:50px;width: 52px; height: 17px; z-index: 141; opacity: 1; transform-origin: 26px 8.5px;">
                                <div class="widget rich_text undefined hleft vtop auto"
                                    style="width: 52px; height: 17px; font-size: 14px; text-align: left; line-height: 0px; font-weight: normal; font-style: normal;">
                                    <div class="rich-text">
                                        <p style="line-height:0; margin-bottom:5px;"><span class="--mb--rich-text"
                                                data-boldtype="0"
                                                style="font-family:FZLanTingHei; font-weight:400; font-size:12px; color:rgb(89, 89, 89); font-style:normal; letter-spacing:0px; line-height:17px; text-decoration:none;">王主任</span>
                                        </p>
                                    </div>
                                </div>

                            </div>
                            <div data-cid="ik4s6szigurlup0zf47ycr9ki" data-link_cid="" class="tree-node"
                                style="position: absolute; top: 24px; right: 150px; width: 159px; height: 17px;z-index: 142; opacity: 1; transform-origin: 79.5px 8.5px;">

                                <div class="widget rich_text undefined hleft vtop auto"
                                    style="width: 159px; height: 17px; font-size: 14px; text-align: left; line-height: 0px; font-weight: normal; font-style: normal;">
                                    <div class="rich-text">
                                        <p style="line-height:0; margin-bottom:5px;"><span class="--mb--rich-text"
                                                data-boldtype="0"
                                                style="font-family:FZLanTingHei; font-weight:400; font-size:14px; color:rgb(89, 89, 89); font-style:normal; letter-spacing:0px; line-height:17px; text-decoration:none;">2023年4月1日14:36:09</span>
                                        </p>
                                    </div>

                                </div>
                            </div>
                            <div data-cid="ik4s6szig6ilup0zf4738qves" data-link_cid="" class="tree-node"
                                style="position: absolute; top: 17px; right: 50px;width: 49px; height: 17px; z-index: 143; opacity: 1; transform-origin: 24.5px 8.5px;">

                                <div class="widget rich_text undefined hleft vtop auto"
                                    style="width: 49px; height: 17px; font-size: 14px; text-align: left; line-height: 0px; font-weight: normal; font-style: normal;">
                                    <div class="rich-text">
                                        <p style="line-height:0; margin-bottom:5px;"><span class="--mb--rich-text"
                                                data-boldtype="0"
                                                style="font-family:FZLanTingHei; font-weight:400; font-size:12px; color:rgb(89, 89, 89); font-style:normal; letter-spacing:0px; line-height:17px; text-decoration:none;">欢迎您！</span>
                                        </p>
                                    </div>

                                </div>
                            </div>
                            <div data-cid="ik4s6szigs2lup0zf47antrdr" data-link_cid="" class="tree-node"
                                style="position: absolute; top: 19px; right: 10px;width: 18px; height: 18px; z-index: 144; opacity: 1; transform-origin: 9px 9px;">

                                <div class="widget svg_icon_path undefined"
                                    style="width: 18px; height: 18px; border-color: rgb(187, 187, 187); border-width: 0px; border-style: solid; color: rgb(129, 129, 129); font-weight: normal; font-style: normal; filter: none; background-color: transparent;">
                                    <span class="icon svg-icon-wrap svg-fa5 svg-fa5-sort-down-fas-wrap"
                                        style="width: 100%; height: 100%; min-width: 18px; min-height: 18px;"><svg
                                            xmlns="http://www.w3.org/2000/svg"
                                            class="styles__StyledSVGIconPathComponent-sc-gbp7ch-0 coCzAQ svg-icon-path-icon fill"
                                            viewBox="0 0 320 512" width="18" height="18">
                                            <defs data-reactroot=""></defs>
                                            <g>
                                                <path
                                                    d="M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z">
                                                </path>
                                            </g>
                                        </svg></span>
                                </div>

                            </div>
                            <div data-cid="ik4s6szigtrlup0zf47rhocyo" data-link_cid="" class="tree-node"
                                style="position: absolute; top: 17px; right:330px;  width: 1px; height: 29px;z-index: 145; opacity: 1; transform-origin: 0.5px 14.5px;">

                                <div class="widget line undefined"
                                    style="width: 1px; height: 29px; border: none; font-weight: normal; font-style: normal; box-shadow: none;">
                                    <svg xmlns="http://www.w3.org/2000/svg" style="overflow: visible; filter: none;">
                                        <path d="M 0.5 0 L 0.5 29" stroke="rgba(187,187,187,1)" stroke-width="1px"
                                            stroke-dasharray=""></path>
                                        <path d="M 0.5 0 L 0.5 29" stroke="transparent" stroke-width="10"
                                            style="pointer-events: auto;"></path>
                                    </svg>
                                </div>

                            </div>
                            <div data-cid="ik4s6szigs4lup0zf47rjwf5b" data-link_cid="" class="tree-node"
                                style="position: absolute; top: 17px;  right:145px;  width: 1px; height: 29px;z-index: 146; opacity: 1; transform-origin: 0.5px 14.5px;">

                                <div class="widget line undefined"
                                    style="width: 1px; height: 29px; border: none; font-weight: normal; font-style: normal; box-shadow: none;">
                                    <svg xmlns="http://www.w3.org/2000/svg" style="overflow: visible; filter: none;">
                                        <path d="M 0.5 0 L 0.5 29" stroke="rgba(187,187,187,1)" stroke-width="1px"
                                            stroke-dasharray=""></path>
                                        <path d="M 0.5 0 L 0.5 29" stroke="transparent" stroke-width="10"
                                            style="pointer-events: auto;"></path>
                                    </svg>
                                </div>

                            </div>
                        </div>

                    </div>


                    <div
                        style="width: 256px; height: max(100vh,1100px); top:0px; z-index: 186;position: absolute; cursor: pointer; background-color: rgb(0, 33, 64); border-right: 1px solid rgb(232, 232, 232);">
                        <div data-cid="ik4s6szig9alup0zf47lcz8o7" data-link_cid="" class="tree-node"
                            style="width:256px;position: absolute;  left: 20px; z-index: 187; opacity: 1; transform-origin: 99px 47.5px;background: rgb(0, 33, 64);">
                            <div style="position: absolute; left: 0px; top: 0px; width: 198px; height: 95px;">
                                <div class="widget rich_text undefined hcenter vtop auto"
                                    style="width: 198px; height: 95px; font-size: 14px; text-align: center; font-weight: normal; font-style: normal;">
                                    <div class="rich-text">
                                        <p style="line-height:0; margin-bottom:5px;"><span class="--mb--rich-text"
                                                data-boldtype="0"
                                                style="font-family:PingFangSC; font-weight:700; font-size:18px; color:rgb(255, 255, 255); font-style:normal; letter-spacing:0px; text-decoration:none;">深静脉置管相关血栓风险</span>
                                        </p>
                                        <p style="line-height:0; margin-bottom:5px;"><span class="--mb--rich-text"
                                                data-boldtype="0"
                                                style="font-family:PingFangSC; font-weight:700; font-size:18px; color:rgb(255, 255, 255); font-style:normal; letter-spacing:0px;  text-decoration:none;">智能预测系统</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div data-cid="ilg2k8bcd73lup0zf479pt7dt" data-link_cid="" class="tree-node"
                            style="position: absolute; top: 150px; left: 0px; z-index: 188; opacity: 1; transform-origin: 128px 457px;">
                            <div style="position: absolute; left: 0px; top: 0px; width: 256px; height: 914px;">
                                <div class="widget navigation_menu undefined"
                                    style="width: 256px; height: 914px; font-weight: normal; font-style: normal;">

                                    <ul class="navigationMenuList">
                                        <li class="menuItem canClickableHighWidget selected">
                                            <div class="content firstLevel clickable" data-link_cid="homepage_link"
                                                style="padding-left: 16px; font-size: 20px; height: 40px;">
                                                <div class="leftContent">

                                                    <div
                                                        class="AdvancedEditableSpan__StyledEditableSpan-sc-1378vn8-0 ZQRcg editable-span-wrap">
                                                        <span class="editable-span">主页</span>
                                                    </div>
                                                </div>
                                                <div class="region gesture"></div>
                                            </div>
                                        </li>
                                        <li class="menuItem canClickableHighWidget">
                                            <div class="content firstLevel clickable" data-link_cid="doctor_list_link"
                                                style="padding-left: 16px; font-size: 20px;  height: 40px; ">
                                                <div class="leftContent">

                                                    <div
                                                        class="AdvancedEditableSpan__StyledEditableSpan-sc-1378vn8-0 ZQRcg editable-span-wrap">
                                                        <span class="editable-span">待审核医护列表</span>
                                                    </div>
                                                </div>

                                                <div class="region gesture"></div>
                                            </div>
                                        </li>
                                        <li class="menuItem canClickableHighWidget">
                                            <div class="content firstLevel clickable" data-link_cid="article_link"
                                                style="padding-left: 16px; font-size: 20px; height: 40px;">
                                                <div class="leftContent">

                                                    <div
                                                        class="AdvancedEditableSpan__StyledEditableSpan-sc-1378vn8-0 ZQRcg editable-span-wrap">
                                                        <span class="editable-span">科普文章</span>
                                                    </div>
                                                </div>
                                                <div class="region gesture"></div>
                                            </div>
                                        </li>
                                    </ul>

                                </div>
                            </div>
                        </div>
                    </div>
                    <table style="position: absolute; left: 300px; top:80px; width: 60%;   ">
                        <colgroup>
                            <col style="width: 33%;">
                            <col style="width: 33%;">
                            <col style="width: 33%;">
                        </colgroup>
                        <tr>
                            <td style="height: 25px; font-size: 20px;">患者</td>
                            <td style="height: 25px; font-size: 20px;">医护人员</td>
                            <td style="height: 25px; font-size: 20px;">医院</td>
                        </tr>
                        <tr>
                            <td id="patient_num" style="height: 25px; font-size: 20px;"></td>
                            <td id="doctor_num" style="height: 25px; font-size: 20px;"></td>
                            <td id="hospital_num" style="height: 25px; font-size: 20px;"></td>
                        </tr>

                    </table>
                    <!-- <tbody  style="position: absolute; left: 300px; top:130px; width: 60%; height: 100px;">
                        <tr>
                            <td id="patient_num">医生编号</td>
                            <td id="doctor_num">36</td>
                            <td id="hospital_num">36</td>
                        </tr>
                        <tr>
                            <td>患者</td>
                            <td>医护人员</td>
                            <td>医院</td>
                        </tr>
                    </tbody> -->
                    <div id="line_chart" style="position: absolute; left: 300px; top:180px; width: 60%; height: 300px;">
                    </div>
                    <div id="pie_chart" style="position: absolute; left: 300px; top:500px; width: 60%; height: 300px;">
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
<script>
    window.onload = function () {

        var lineChart = echarts.init(document.getElementById('line_chart'), null, {
            renderer: 'canvas',
            useDirtyRect: false
        });

        var pieChart = echarts.init(document.getElementById('pie_chart'));
        var pieChartOption = {
            title: {
                text: '医护人员分布',
                // subtext: 'Fake Data',
                left: 'center'
            },
            tooltip: {
                trigger: 'item'
            },
            legend: {
                orient: 'vertical',
                left: 'left'
                // top: '5%',
                // left: 'center'
            },
            series: [
                {
                    name: '医护人数',
                    type: 'pie',
                    radius: ['40%', '70%'],
                    avoidLabelOverlap: false,
                    label: {
                        show: false,
                        position: 'center'
                    },
                    // emphasis: {
                    //     label: {
                    //         show: true,
                    //         fontSize: 40,
                    //         fontWeight: 'bold'
                    //     }
                    // },
                    labelLine: {
                        show: false
                    },
                    data: [

                    ]
                }
            ]
        };
        fetch('http://47.122.20.205:8000/getpicinfo')
            // fetch('http://47.122.20.205:8000/updateinfo?doctor_id='+current_doctor_id+'&reviestatus=2')
            .then(response => response.json())
            .then(data => {
                console.log(data);
                var lineChartOption = {
                    title: {
                        text: '患者统计图',
                        // subtext: 'Fake Data',
                        left: 'center'
                    },
                    tooltip: {
                        trigger: 'axis'
                    },
                    xAxis: {
                        type: 'category',
                        data: Object.keys(data.petient_trend)
                    },
                    yAxis: {
                        type: 'value'
                    },
                    series: [
                        {
                            name: '新增患者数',
                            data: Object.values(data.petient_trend),
                            type: 'line'
                        }
                    ]
                };
                lineChart.setOption(lineChartOption);

                window.addEventListener('resize', lineChart.resize);
                pieChartOption.series[0].data = Object.entries(data.doctor_hospital).map(([key, value]) => {
                    return {
                        value: value,
                        name: key
                    }
                });

                pieChart.setOption(pieChartOption);
                window.addEventListener('resize', pieChart.resize);

                document.getElementById('patient_num').innerText = data.patient_num + "人";
                document.getElementById('doctor_num').innerText = data.doctor_num + "人";
                document.getElementById('hospital_num').innerText = data.hospital_num + "家";
            })
            .catch(error => console.error(error));

    }
</script>